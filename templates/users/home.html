{% extends 'users/base.html' %}
{% load static %}

{% block title %}DriveRental | Ultra-Premium Car Rental Experience{% endblock %}

{% block content %}
<!-- Premium Hero Section -->
<section class="hero-section position-relative overflow-hidden">
    <div class="hero-background"></div>
    <div class="container position-relative z-2">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6">
                <div class="hero-content">
                    <div class="badge-premium mb-4 fade-in-up">
                        <span class="badge-premium-content">
                            <i class="fas fa-crown me-2"></i>ULTIMATE LUXURY EXPERIENCE
                        </span>
                    </div>
                    <h1 class="hero-title mb-4 fade-in-up" data-delay="100">
                        Elevate Your Journey With 
                        <span class="text-gradient-gold">Ultimate Luxury</span>
                    </h1>
                    <p class="hero-subtitle mb-5 fade-in-up" data-delay="200">
                        Experience the world's finest collection of luxury vehicles with unparalleled service. 
                        From executive sedans to elite supercars, discover driving perfection.
                    </p>
                    <div class="hero-actions d-flex flex-wrap gap-3 fade-in-up" data-delay="300">
                        <a href="{% url 'rentals:browse_cars' %}" class="btn btn-gold btn-lg">
                            <i class="fas fa-search me-2"></i>Explore Our Fleet
                        </a>
                        {% if not user.is_authenticated %}
                        <a href="{% url 'users:signup' %}" class="btn btn-outline-gold btn-lg">
                            <i class="fas fa-crown me-2"></i>Join Elite
                        </a>
                        {% endif %}
                    </div>
                    
                    <!-- Trust Indicators -->
                    <div class="trust-indicators mt-5 pt-4 fade-in-up" data-delay="400">
                        <div class="row g-4">
                            <div class="col-4">
                                <div class="trust-item text-center">
                                    <div class="trust-value display-6 fw-bold">{{ total_cars }}+</div>
                                    <div class="trust-label text-champagne opacity-75">Premium Vehicles</div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="trust-item text-center">
                                    <div class="trust-value display-6 fw-bold">{{ total_rentals }}+</div>
                                    <div class="trust-label text-champagne opacity-75">Satisfied Clients</div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="trust-item text-center">
                                    <div class="trust-value display-6 fw-bold">24/7</div>
                                    <div class="trust-label text-champagne opacity-75">Concierge</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-visual">
                    <div class="car-showcase">
                        <div class="main-car floating">
                            {% if featured_cars.0 %}
                            <img src="{{ featured_cars.0.image.url }}" 
                                 alt="{{ featured_cars.0.make }} {{ featured_cars.0.model }}" 
                                 class="img-fluid">
                            {% else %}
                            <img src="{% static 'images/default-car.jpg' %}" 
                                 alt="Luxury Car" 
                                 class="img-fluid">
                            {% endif %}
                        </div>
                        <div class="floating-element element-1">
                            <div class="floating-card">
                                <i class="fas fa-bolt text-gold"></i>
                                <span>Electric Fleet</span>
                            </div>
                        </div>
                        <div class="floating-element element-2">
                            <div class="floating-card">
                                <i class="fas fa-star text-gold"></i>
                                <span>5-Star Rated</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="scroll-indicator fade-in-up" data-delay="500">
        <div class="scroll-line"></div>
        <span class="scroll-text">Explore More</span>
    </div>
</section>

<!-- Premium Fleet Showcase -->
<section class="section-padding fleet-showcase">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h6 class="section-subtitle fade-in">CURATED COLLECTION</h6>
            <h2 class="section-title fade-in" data-delay="100">Our <span class="text-gradient-gold">Premium Fleet</span></h2>
            <p class="section-description fade-in" data-delay="200">
                Hand-picked luxury vehicles maintained to perfection for your exclusive driving experience
            </p>
        </div>
        
        <div class="fleet-grid">
            <div class="row g-4">
                {% for car in featured_cars %}
                <div class="col-lg-4 col-md-6">
                    <div class="fleet-card card fade-in" data-delay="{{ forloop.counter0|add:100 }}">
                        <div class="card-image">
                            {% if car.image %}
                            <img src="{{ car.image.url }}" 
                                 alt="{{ car.make }} {{ car.model }}" 
                                 class="img-fluid">
                            {% else %}
                            <img src="{% static 'images/default-car.jpg' %}" 
                                 alt="{{ car.make }} {{ car.model }}" 
                                 class="img-fluid">
                            {% endif %}
                            <div class="card-badge badge-{{ car.car_type|default:'luxury' }}">
                                {{ car.get_car_type_display|default:"Premium" }}
                            </div>
                            <div class="card-overlay">
                                <a href="{% url 'rentals:car_detail' car.pk %}" class="btn btn-platinum">View Details</a>
                            </div>
                        </div>
                        <div class="card-content">
                            <h5 class="card-title">{{ car.year }} {{ car.make }} {{ car.model }}</h5>
                            <p class="card-description">{{ car.description|truncatewords:10|default:"Premium luxury vehicle" }}</p>
                            <div class="card-features">
                                <span><i class="fas fa-users"></i> {{ car.seats }} Seats</span>
                                <span><i class="fas fa-gas-pump"></i> {{ car.get_fuel_type_display }}</span>
                                <span><i class="fas fa-car"></i> {{ car.get_transmission_display }}</span>
                            </div>
                            <div class="card-price">
                                <span class="price">${{ car.daily_rate }}</span>
                                <span class="period">/day</span>
                            </div>
                            {% if car.average_rating > 0 %}
                            <div class="card-rating mt-2">
                                <div class="stars">
                                    {% for i in "12345" %}
                                        {% if forloop.counter <= car.average_rating %}
                                            <i class="fas fa-star text-gold"></i>
                                        {% else %}
                                            <i class="far fa-star text-gold"></i>
                                        {% endif %}
                                    {% endfor %}
                                    <span class="ms-1 text-champagne">({{ car.total_reviews }})</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center">
                    <div class="alert alert-info">
                        <h5>No cars available at the moment</h5>
                        <p>Check back soon for our premium fleet updates.</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="text-center mt-5 fade-in" data-delay="300">
            <a href="{% url 'rentals:browse_cars' %}" class="btn btn-outline-gold btn-lg">
                View Complete Collection <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>

<!-- Premium Features -->
<section class="section-padding premium-features">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h6 class="section-subtitle fade-in">WHY DRIVERENTAL</h6>
            <h2 class="section-title fade-in" data-delay="100">The <span class="text-gradient-gold">Elite Experience</span></h2>
            <p class="section-description fade-in" data-delay="200">
                We redefine luxury car rental with unparalleled service and attention to detail
            </p>
        </div>
        
        <div class="features-grid">
            <div class="row g-5">
                <div class="col-lg-4">
                    <div class="feature-card fade-in" data-delay="0">
                        <div class="feature-icon">
                            <div class="icon-wrapper">
                                <i class="fas fa-gem"></i>
                            </div>
                        </div>
                        <h4 class="feature-title">Premium Fleet</h4>
                        <p class="feature-description">
                            Curated selection of luxury vehicles from top manufacturers, 
                            meticulously maintained and regularly updated.
                        </p>
                        <ul class="feature-list">
                            <li><i class="fas fa-check"></i> Latest models</li>
                            <li><i class="fas fa-check"></i> Premium maintenance</li>
                            <li><i class="fas fa-check"></i> Regular sanitization</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="feature-card fade-in" data-delay="100">
                        <div class="feature-icon">
                            <div class="icon-wrapper">
                                <i class="fas fa-concierge-bell"></i>
                            </div>
                        </div>
                        <h4 class="feature-title">24/7 Concierge</h4>
                        <p class="feature-description">
                            Dedicated personal concierge service available round-the-clock 
                            to ensure a seamless experience.
                        </p>
                        <ul class="feature-list">
                            <li><i class="fas fa-check"></i> Personal assistant</li>
                            <li><i class="fas fa-check"></i> Instant support</li>
                            <li><i class="fas fa-check"></i> Custom requests</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="feature-card fade-in" data-delay="200">
                        <div class="feature-icon">
                            <div class="icon-wrapper">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                        </div>
                        <h4 class="feature-title">Complete Protection</h4>
                        <p class="feature-description">
                            Comprehensive insurance coverage and safety protocols 
                            for complete peace of mind.
                        </p>
                        <ul class="feature-list">
                            <li><i class="fas fa-check"></i> Full coverage insurance</li>
                            <li><i class="fas fa-check"></i> 24/7 roadside assistance</li>
                            <li><i class="fas fa-check"></i> Security monitoring</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works -->
<section class="section-padding process-section">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h6 class="section-subtitle fade-in">ELEGANT PROCESS</h6>
            <h2 class="section-title fade-in" data-delay="100">How <span class="text-gradient-gold">DriveRental</span> Works</h2>
            <p class="section-description fade-in" data-delay="200">
                Experience our seamless luxury rental process designed for your convenience
            </p>
        </div>
        
        <div class="process-steps">
            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="process-step fade-in" data-delay="0">
                        <div class="step-number">01</div>
                        <div class="step-icon">
                            <i class="fas fa-car"></i>
                        </div>
                        <h5 class="step-title">Select Your Vehicle</h5>
                        <p class="step-description">
                            Browse our premium collection and choose the perfect vehicle for your needs
                        </p>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="process-step fade-in" data-delay="100">
                        <div class="step-number">02</div>
                        <div class="step-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h5 class="step-title">Book & Confirm</h5>
                        <p class="step-description">
                            Select your dates, provide details, and confirm your reservation instantly
                        </p>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="process-step fade-in" data-delay="200">
                        <div class="step-number">03</div>
                        <div class="step-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h5 class="step-title">Personal Delivery</h5>
                        <p class="step-description">
                            Your vehicle is delivered to your preferred location by our professional team
                        </p>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="process-step fade-in" data-delay="300">
                        <div class="step-number">04</div>
                        <div class="step-icon">
                            <i class="fas fa-road"></i>
                        </div>
                        <h5 class="step-title">Enjoy The Journey</h5>
                        <p class="step-description">
                            Experience premium mobility with 24/7 support throughout your rental period
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="section-padding testimonial-section">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h6 class="section-subtitle fade-in">CLIENT TESTIMONIALS</h6>
            <h2 class="section-title text-platinum fade-in" data-delay="100">What Our <span class="text-gradient-gold">Elite Clients</span> Say</h2>
        </div>
        
        <div class="testimonials-grid">
            <div class="row g-4">
                {% for review in featured_reviews %}
                <div class="col-lg-4 col-md-6">
                    <div class="card testimonial-content fade-in" data-delay="{{ forloop.counter0|add:100 }}">
                        <div class="quote-icon">
                            <i class="fas fa-quote-left"></i>
                        </div>
                        <p class="testimonial-text">
                            "{{ review.comment|truncatewords:30 }}"
                        </p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="author-info">
                                <h6 class="author-name">{{ review.rental.customer.get_full_name|default:review.rental.customer.username }}</h6>
                                <p class="author-role">{{ review.rental.car.make }} Driver</p>
                            </div>
                            <div class="rating ms-auto">
                                {% for i in "12345" %}
                                    {% if forloop.counter <= review.rating %}
                                        <i class="fas fa-star text-gold small"></i>
                                    {% else %}
                                        <i class="far fa-star text-gold small"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center">
                    <div class="alert alert-light">
                        <p class="text-platinum mb-0">Be the first to share your experience!</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Final CTA -->
<section class="section-padding cta-section">
    <div class="container">
        <div class="cta-card rounded-4 position-relative overflow-hidden">
            <div class="cta-background"></div>
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <div class="cta-content text-white">
                        <h2 class="cta-title mb-3">Ready to Experience Ultimate Luxury?</h2>
                        <p class="cta-description mb-4 opacity-90">
                            Join our exclusive community of discerning clients who value excellence in every journey. 
                            Experience the DriveRental difference today.
                        </p>
                        <div class="cta-actions d-flex flex-wrap gap-3">
                            {% if not user.is_authenticated %}
                            <a href="{% url 'users:signup' %}" class="btn btn-platinum btn-lg">
                                <i class="fas fa-crown me-2"></i>Become a Member
                            </a>
                            {% endif %}
                            <a href="{% url 'rentals:browse_cars' %}" class="btn btn-outline-gold btn-lg">
                                <i class="fas fa-car me-2"></i>Browse Collection
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <div class="cta-visual">
                        <i class="fas fa-car-side"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// Intersection Observer for fade-in animations
document.addEventListener('DOMContentLoaded', function() {
    const fadeElements = document.querySelectorAll('.fade-in');
    
    const fadeObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const delay = entry.target.getAttribute('data-delay') || 0;
                setTimeout(() => {
                    entry.target.classList.add('visible');
                }, delay);
            }
        });
    }, { threshold: 0.1 });
    
    fadeElements.forEach(el => fadeObserver.observe(el));
    
    // Staggered fade-in-up animations
    const fadeUpElements = document.querySelectorAll('.fade-in-up');
    fadeUpElements.forEach((el, index) => {
        const delay = el.getAttribute('data-delay') || index * 100;
        setTimeout(() => {
            el.style.animationDelay = `${delay}ms`;
        }, 100);
    });
});
</script>
{% endblock %}